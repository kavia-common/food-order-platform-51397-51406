{"is_source_file": true, "format": "JavaScript", "description": "This file implements a React context provider for managing shopping cart state in a food ordering web application. It includes functions for loading/saving cart state to localStorage with versioning, sanitizing input data, and exposing public methods to add, modify, and apply promotions to cart items.", "external_files": ["react"], "external_methods": ["React.createContext", "React.useContext", "React.useEffect", "React.useMemo", "React.useRef", "React.useState"], "published": ["CartProvider", "useCart", "__testOnly__loadCartState"], "classes": [], "methods": [{"name": "safeParseJson(maybeJson, fallback)", "description": "Safely parses a JSON string, returning a fallback value on error.", "scope": "", "scopeKind": ""}, {"name": "isPlainObject(value)", "description": "Checks if a value is a plain object (not null, array, or other types).", "scope": "", "scopeKind": ""}, {"name": "sanitizeItems(items)", "description": "Filters and sanitizes an array of cart items, ensuring only valid objects with string itemId are retained.", "scope": "", "scopeKind": ""}, {"name": "sanitizePromo(promo)", "description": "Sanitizes a promo object, ensuring it has valid code and discountRate properties.", "scope": "", "scopeKind": ""}, {"name": "safeStorageGet(key)", "description": "Attempts to retrieve an item from localStorage, returning null if unavailable.", "scope": "", "scopeKind": ""}, {"name": "safeStorageSet(key, value)", "description": "Attempts to store an item in localStorage, returning true if successful.", "scope": "", "scopeKind": ""}, {"name": "loadCartState()", "description": "Loads cart state from localStorage, supporting multiple versions and fallback logic.", "scope": "", "scopeKind": ""}, {"name": "CartProvider({ children })", "description": "React component that provides the cart context, managing state, persistence, and public cart operations.", "scope": "", "scopeKind": ""}, {"name": "useCart()", "description": "Custom React hook for consuming the cart context.", "scope": "", "scopeKind": ""}, {"name": "__testOnly__loadCartState()", "description": "Test utility to expose cart state loading logic for testing purposes.", "scope": "", "scopeKind": ""}, {"name": "addItem(menuItem)", "scope": "CartProvider", "scopeKind": "function", "description": "unavailable"}, {"name": "applyPromo(codeRaw)", "scope": "CartProvider", "scopeKind": "function", "description": "unavailable"}, {"name": "clearCart()", "scope": "CartProvider", "scopeKind": "function", "description": "unavailable"}, {"name": "clearPromo()", "scope": "CartProvider", "scopeKind": "function", "description": "unavailable"}, {"name": "computePromoFromCode(codeRaw)", "scope": "CartProvider", "scopeKind": "function", "description": "unavailable"}, {"name": "decrementItem(itemId)", "scope": "CartProvider", "scopeKind": "function", "description": "unavailable"}, {"name": "incrementItem(itemId)", "scope": "CartProvider", "scopeKind": "function", "description": "unavailable"}, {"name": "removeItem(itemId)", "scope": "CartProvider", "scopeKind": "function", "description": "unavailable"}], "calls": ["JSON.parse", "window.localStorage.getItem", "window.localStorage.setItem", "JSON.stringify"], "search-terms": ["CartContext", "localStorage", "versioning", "cart items", "promo code", "React Context", "shopping cart"], "state": 2, "file_id": 13, "knowledge_revision": 35, "git_revision": "ef5f08353a2a383ceb3473ce82d96cca9b9014ff", "revision_history": [{"34": "ef5f08353a2a383ceb3473ce82d96cca9b9014ff"}, {"35": "ef5f08353a2a383ceb3473ce82d96cca9b9014ff"}], "ctags": [{"_type": "tag", "name": "CART_STORAGE_KEY_V1", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^const CART_STORAGE_KEY_V1 = \"food_order_cart_v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "CART_STORAGE_KEY_V2", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^const CART_STORAGE_KEY_V2 = \"food_order_cart_v2\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "CART_STORAGE_VERSION", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^const CART_STORAGE_VERSION = 2;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "CartContext", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^const CartContext = createContext(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "CartProvider", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^export function CartProvider({ children }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ children })"}, {"_type": "tag", "name": "PROMO_STORAGE_KEY_V1", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^const PROMO_STORAGE_KEY_V1 = \"food_order_promo_v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "__testOnly__loadCartState", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^export function __testOnly__loadCartState() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "addItem", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^  function addItem(menuItem) {$/", "language": "JavaScript", "kind": "function", "signature": "(menuItem)", "scope": "CartProvider", "scopeKind": "function"}, {"_type": "tag", "name": "applyPromo", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^  function applyPromo(codeRaw) {$/", "language": "JavaScript", "kind": "function", "signature": "(codeRaw)", "scope": "CartProvider", "scopeKind": "function"}, {"_type": "tag", "name": "clearCart", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^  function clearCart() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "CartProvider", "scopeKind": "function"}, {"_type": "tag", "name": "clearPromo", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^  function clearPromo() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "CartProvider", "scopeKind": "function"}, {"_type": "tag", "name": "computePromoFromCode", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^  function computePromoFromCode(codeRaw) {$/", "language": "JavaScript", "kind": "function", "signature": "(codeRaw)", "scope": "CartProvider", "scopeKind": "function"}, {"_type": "tag", "name": "decrementItem", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^  function decrementItem(itemId) {$/", "language": "JavaScript", "kind": "function", "signature": "(itemId)", "scope": "CartProvider", "scopeKind": "function"}, {"_type": "tag", "name": "incrementItem", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^  function incrementItem(itemId) {$/", "language": "JavaScript", "kind": "function", "signature": "(itemId)", "scope": "CartProvider", "scopeKind": "function"}, {"_type": "tag", "name": "isPlainObject", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^function isPlainObject(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "loadCartState", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^function loadCartState() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "removeItem", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^  function removeItem(itemId) {$/", "language": "JavaScript", "kind": "function", "signature": "(itemId)", "scope": "CartProvider", "scopeKind": "function"}, {"_type": "tag", "name": "safeParseJson", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^function safeParseJson(maybeJson, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(maybeJson, fallback)"}, {"_type": "tag", "name": "safeStorageGet", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^function safeStorageGet(key) {$/", "language": "JavaScript", "kind": "function", "signature": "(key)"}, {"_type": "tag", "name": "safeStorageSet", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^function safeStorageSet(key, value) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value)"}, {"_type": "tag", "name": "sanitizeItems", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^function sanitizeItems(items) {$/", "language": "JavaScript", "kind": "function", "signature": "(items)"}, {"_type": "tag", "name": "sanitizePromo", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^function sanitizePromo(promo) {$/", "language": "JavaScript", "kind": "function", "signature": "(promo)"}, {"_type": "tag", "name": "useCart", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^export function useCart() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/food-order-platform-51397-51406/frontend_app/src/CartContext.js", "pattern": "/^  return <CartContext.Provider value={value}>{children}<\\/CartContext.Provider>;$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}], "hash": "44e5c31adf429d268cd867f7e0943210", "format-version": 4, "code-base-name": "frontend_app", "filename": "frontend_app/src/CartContext.js", "fields": [{"name": "return <CartContext.Provider value={value}>{children}<\\/CartContext.Provider>;", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}]}